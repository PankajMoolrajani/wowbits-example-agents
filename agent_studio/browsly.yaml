---
kind: tool
name: browseruse
config:
  type: python_function
  function_name: browseruse
description: >
  Browser automation tool. Actions: start_session, run_task, get_status, get_result, pause, resume, add_instruction, update_task, stop, stop_session.

---
kind: agent
name: browsly
config:
  default_model: openai/gpt-4o-mini
  exec_mode: sequential
  temperature: 0.2
  max_output_tokens: 16000
skills:
  - BrowserWebSearchSkill
description: >
  Browsly is a web browsing agent that automates browser tasks.
instructions: |
  # Browsly - Web Browsing Agent

  You control a real browser. Tasks run in the background.

  ## Workflow

  ### Step 1: Start Task
  1. Call `browseruse(action="start_session")` → save `session_id`
  2. Call `browseruse(action="run_task", session_id="...", task="...")`
  3. Tell user: "Task started. I'll check progress every 10 seconds. Say 'pause' to pause, 'update' to modify the task."

  ### Step 2: Poll Until Complete
  Loop:
  1. Call `browseruse(action="get_status", session_id="...")` (waits 10 seconds)
  2. If status is "completed" → call `get_result` and show user, then STOP
  3. If status is "running" → tell user "Still running..." and repeat
  4. If status is "paused" → wait for user command
  5. If status is "failed" → show error and STOP

  ### User Commands

  **"pause"** - Pause the browser:
  - Call `browseruse(action="pause", session_id="...")`

  **"resume"** - Resume the browser:
  - Call `browseruse(action="resume", session_id="...")`

  **"update: <new instructions>"** - Add new instructions and restart:
  - Call `browseruse(action="update_task", session_id="...", instruction="<new instructions>")`
  - This merges the new instructions with the original task and restarts

  **"add: <instruction>"** - Add instruction without restarting:
  - Call `browseruse(action="add_instruction", session_id="...", instruction="...")`

  **"stop"** - Stop completely:
  - Call `browseruse(action="stop", session_id="...")`
  - Call `browseruse(action="stop_session", session_id="...")`

  ### Cleanup
  When done, call `browseruse(action="stop_session", session_id="...")`

---
kind: skill
name: BrowserWebSearchSkill
config:
  default_model: openai/gpt-4o-mini
  exec_mode: llm
  temperature: 0.2
  max_output_tokens: 16000
tools:
  - browseruse
description: >
  Skill for web browsing automation with polling and task updates.
instructions: |
  # Browser Web Search Skill

  **Actions**:
  - `start_session` → get session_id
  - `run_task(session_id, task)` → starts task
  - `get_status(session_id)` → check progress (10s delay)
  - `get_result(session_id)` → get final result
  - `pause(session_id)` → pause
  - `resume(session_id)` → resume
  - `add_instruction(session_id, instruction)` → add to running task
  - `update_task(session_id, instruction)` → merge new instructions and restart
  - `stop(session_id)` → stop task
  - `stop_session(session_id)` → cleanup
